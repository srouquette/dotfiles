{{- /* promptStringOnce is super slow and doesnt seem to work on my computer */ -}}
{{- /* $name := promptStringOnce . "name" "Username" "Syl" */ -}}
{{- /* $email := promptStringOnce . "email" "Email Address" "rouquette@gmail.com" */ -}}
{{- $choices := list "home" "work" -}}
{{- /* $profile := promptChoiceOnce . "profile" "Which profile" $choices "home" */ -}}

{{- $os := .chezmoi.os -}}
{{- if and (eq .chezmoi.os "windows") (ne (env "MSYSTEM") "") -}}
{{-     $os = "msys2" -}}
{{- end -}}


[data]
    name = "Syl ‚èö"
    email = "srouquette@gmail.com"
    profile = "home"
    os = {{ $os | quote }}
    # git-for-windows has to run in MINGW64 terminal,
    # but other packages from another env may run just fine
    # we will install those package from this system
    msystem = "UCRT64"

[data.packages]
    common = [
        "pactoys",
        "openssh",
        "unzip",
        "zsh",
    ]
    # noteworthy cli editors: micro helix
    prefixed = [
        "bat",
        "eza",
        "fzf",
        "jq",
        "python-tldr",
        "starship",
        "vivid",
    ]
    aliases = [
        "tldr"
    ]


{{ if lookPath "code" -}}
[edit]
    command = "code"
    args = ["--wait"]
{{- else if lookPath "nano" -}}
[edit]
    command = "nano"
{{- end }}


{{ if lookPath "difft" -}}
[diff]
    command = "difft"
    args = [
        "{{ "{{" }} .Destination {{ "}}" }}",
        "{{ "{{" }} .Target {{ "}}" }}",
        "--override", "*config:toml",
        "--parse-error-limit", "100",
    ]
    pager = "less -FX"
{{- else if lookPath "delta" -}}
[diff]
    pager = "delta"
{{- end }}


{{ if lookPath "meld" -}}
[merge]
    command = "meld"
    args = [
        "{{ "{{" }} .Target {{ "}}" }}",
        "{{ "{{" }} .Source {{ "}}" }}",
        "{{ "{{" }} .Destination {{ "}}" }}",
        "--output",
        "{{ "{{" }} .Source {{ "}}" }}",
    ]
{{- else if lookPath "code" -}}
[merge]
    command = "code"
    args = ["--wait", "--merge",
        "{{ "{{" }} .Destination {{ "}}" }}",
        "{{ "{{" }} .Target {{ "}}" }}",
        "{{ "{{" }} .Target {{ "}}" }}",
        "{{ "{{" }} .Source {{ "}}" }}",
    ]
{{- end }}



{{ if ne $os "windows" -}}
[interpreters.sh]
    command = "bash"
[interpreters.zsh]
    command = "zsh"
[interpreters.ps1]
    command = "bash"
{{- end }}
